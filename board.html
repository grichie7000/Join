<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="style/standard.css">
    <link rel="stylesheet" href="style/sideBar.css">
    <link rel="stylesheet" href="style/topBar.css">
    <link rel="stylesheet" href="style/board.css">
    <link rel="stylesheet" href="style/boardAddTaskOverlay.css">
    <link rel="stylesheet" href="style/editTask.css">

    <link rel="icon" type="image/x-icon" href="assets/img/Join-logo.png">
    <title>Board</title>

    <!-- Nicht-modulare Skripte per defer laden -->
    <script src="scripts/topBar.js" defer></script>
    <script src="scripts/addTask.js" defer></script>
    <script src="scripts/sideBar.js" defer></script>
    <!-- <script src="scripts/addTask-board.js" defer></script> -->
</head>

<body onload="initAddTask(), loadInitals()">
    <div class="sideBar">
        <img class="joinLogo" src="assets/img/Join-logo.png" alt="JoinLogo">

        <div class="menuPos">
            <a href="summary.html" class="navMenu">
                <img src="assets/img/summaryLogo.png" alt="summaryLogo">
                <div>Summary</div>
            </a>
            <a href="addTask.html" class="navMenu">
                <img src="assets/img/addTaskLogo.png" alt="summaryLogo">
                <div>Add Task</div>
            </a>
            <a href="board.html" class="navMenu active">
                <img src="assets/img/BoardLogo.png" alt="summaryLogo">
                <div>Board</div>
            </a>
            <a href="contact_ra.html" class="navMenu">
                <img src="assets/img/contactsLogo.png" alt="summaryLogo">
                <div>Contacts</div>
            </a>
        </div>

        <div class="lawSection">
            <a href="privacyPolicy.html">Privacy Policy</a>
            <a href="legalNotice.html">Legal notice</a>
        </div>
    </div>

    <div class="mainContent">
        <div class="topBar">
            <h3>Kanban Project Management Tool</h3>
            <div style="padding-right: 20px !important;" class="profile">
                <a href="help.html" class="help">?</a>
                <p class="initials" id="profile-toggle"></p>
                <div style="right: 50px !important;" class="dropdown" id="dropdown-menu">
                    <ul>
                        <li><a href="legalNotice.html">Legal Notice</a></li>
                        <li><a href="privacyPolicy.html">Privacy Policy</a></li>
                        <li><a href="relogin.html">Log Out</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <section class="firstContent">
            <div class="board-header">
                <h1>Board</h1>
                <div class="header-right">
                    <div class="input-wrapper">
                        <input class="findTaskInput" type="text" placeholder="Find Task">
                        <span class="separator"></span>
                        <img class="search-icon" src="assets/img/search.svg" alt="Search">
                    </div>
                    <button class="addTaskButton">
                        Add task
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M8.66602 11.3327H0.666016V8.66602H8.66602V0.666016H11.3327V8.66602H19.3327V11.3327H11.3327V19.3327H8.66602V11.3327Z"
                                fill="white" />
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <section class="kanban-board">
            <div class="kanban-column">
                <div class="titles">
                    To Do <div class="toDoButton">+</div>
                </div>
                <div id="to-do" class="task-container" ondrop="moveTo(event, 'to-do')" ondragover="allowDrop(event)">
                </div>
            </div>
            <div class="kanban-column">
                <div class="titles">
                    In Progress <div class="inProgressButton">+</div>
                </div>
                <div id="in-progress" class="task-container" ondrop="moveTo(event, 'in-progress')"
                    ondragover="allowDrop(event)"></div>
            </div>
            <div class="kanban-column">
                <div class="titles">
                    Await Feedback <div class="awaitButton">+</div>
                </div>
                <div id="await-feedback" class="task-container" ondrop="moveTo(event, 'await-feedback')"
                    ondragover="allowDrop(event)"></div>
            </div>
            <div class="kanban-column">
                <div class="titles">
                    Done
                    <div
                        style="border: none; width: 24px; height: 24px; cursor: pointer; display: flex; justify-content: center; align-items: center; padding-top: 4px;">
                    </div>
                </div>
                <div id="done" class="task-container" ondrop="moveTo(event, 'done')" ondragover="allowDrop(event)">
                </div>
            </div>
        </section>
    </div>

    <!-- Task Detail Overlay -->
    <div id="taskDetailOverlay" class="overlay">
        <div class="overlay-content">
            <div class="view-mode">
                <div class="overlay-header">
                    <span class="category-badge"></span>
                    <button class="close-btn">&times;</button>
                </div>
                <h2 class="task-title" id="overlay-task-title"></h2>
                <p class="task-description" id="overlay-task-description"></p>
                <p class="task-due-date"></p>
                <p class="task-priority"></p>

                <div class="task-contacts">
                    <h4>Assigned To:</h4>
                    <ul style="display: flex; flex-direction: column; gap: 10px; padding-inline-start: 20px;"
                        class="contacts-list"></ul>
                </div>

                <div class="task-subtasks">
                    <h4 style="padding-top: 10px;">Subtasks:</h4>
                    <ul class="subtasks-list"></ul>
                </div>
            </div>

            <form class="edit-mode" style="display: none;">
                <div class="input-Section">
                    <!-- Linke Spalte -->
                    <div class="inputLeft">
                        <!-- Title -->
                        <div class="form-title">
                            <label for="edit-title">Title</label>
                            <input type="text" id="edit-title" class="edit-title" name="edit-title"
                                placeholder="Enter a title" required>
                            <p id="error-edit-title" class="error-message"></p>
                        </div>

                        <!-- Description -->
                        <div class="form-description">
                            <label for="edit-description">Description</label>
                            <textarea id="edit-description" class="edit-description" name="edit-description"
                                placeholder="Enter a Description" rows="4"></textarea>
                        </div>

                        <!-- Assigned to (Dropdown) -->
                    </div>

                    <!-- Rechte Spalte -->
                    <div class="inputRight">
                        <!-- Due Date -->
                        <div class="form-date">
                            <label for="edit-due-date">Due Date</label>
                            <input type="date" id="edit-due-date" class="edit-due-date" name="edit-due-date" required>
                            <p id="error-edit-date" class="error-message"></p>
                        </div>

                        <!-- Priority -->
                        <div class="form-priority">
                            <label for="edit-priority">Priority</label>
                            <div style="display: flex; gap: 10px;" id="edit-priority">
                                <label class="radio-container">
                                    <input type="radio" id="edit-urgent" name="edit-priority" value="urgent">
                                    <span class="radio-custom urgent-radio">
                                        Urgent <img src="./assets/img/urgent.png" alt="">
                                    </span>
                                </label>
                                <label class="radio-container">
                                    <input type="radio" id="edit-medium" name="edit-priority" value="medium">
                                    <span class="radio-custom medium-radio">
                                        Medium <img src="./assets/img/medium.png" alt="">
                                    </span>
                                </label>
                                <label class="radio-container">
                                    <input type="radio" id="edit-low" name="edit-priority" value="low">
                                    <span class="radio-custom low-radio">
                                        Low <img src="./assets/img/low.png" alt="">
                                    </span>
                                </label>
                            </div>
                        </div>

                        <!-- Interaktives Dropdown für Assigned Contacts -->
                        <div class="form-assigned-to">
                            <label>Assign Contacts:</label>
                            <div class="contact-selection-wrapper">
                                <div class="selected-contacts-display" onclick="toggleContactsDropdown()">
                                    <span class="placeholder-text" style="font-size: 15px;">Select
                                        Contacts</span>
                                    <!-- Pfeil rechts hinzufügen -->
                                    <span class="dropdown-arrow">&#9662;</span>
                                </div>
                                <div class="selected-contacts-list"></div>
                                <!-- Dropdown-Container, der standardmäßig ausgeblendet ist -->
                                <div id="contactsDropdown" class="contacts-dropdown">
                                    <div id="editContactsCheckboxContainer" class="contacts-checkbox-container">
                                        <!-- Hier werden per JavaScript die Kontakt-Checkboxen eingefügt -->
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- Subtasks -->
                        <div class="form-subtasks">
                            <label for="edit-subtask">Subtasks</label>
                            <div class="subtask-input-container">
                                <input type="text" id="edit-subtask" name="edit-subtask" placeholder="Add new subtask">
                                <button type="button" id="add-subtask-btn">
                                    <img src="assets/img/plus_task.png" id="add-subtask-btn" alt="Add Subtask">
                                </button>
                            </div>

                            <ul id="subtask-list" class="edit-subtasks"></ul>
                        </div>
                    </div>
                </div>
            </form>

            <div class="overlay-footer">
                <div class="delete-container">
                    <svg class="delete-svg" width="15" height="15" viewBox="0 0 16 18" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3 18C2.45 18 1.97917 17.8042 1.5875 17.4125C1.19583 17.0208 1 16.55 1 16V3C0.716667 3 0.479167 2.90417 0.2875 2.7125C0.0958333 2.52083 0 2.28333 0 2C0 1.71667 0.0958333 1.47917 0.2875 1.2875C0.479167 1.09583 0.716667 1 1 1H5C5 0.716667 5.09583 0.479167 5.2875 0.2875C5.47917 0.0958333 5.71667 0 6 0H10C10.2833 0 10.5208 0.0958333 10.7125 0.2875C10.9042 0.479167 11 0.716667 11 1H15C15.2833 1 15.5208 1.09583 15.7125 1.2875C15.9042 1.47917 16 1.71667 16 2C16 2.28333 15.9042 2.52083 15.7125 2.7125C15.5208 2.90417 15.2833 3 15 3V16C15 16.55 14.8042 17.0208 14.4125 17.4125C14.0208 17.8042 13.55 18 13 18H3ZM3 3V16H13V3H3ZM5 13C5 13.2833 5.09583 13.5208 5.2875 13.7125C5.47917 13.9042 5.71667 14 6 14C6.28333 14 6.52083 13.9042 6.7125 13.7125C6.90417 13.5208 7 13.2833 7 13V6C7 5.71667 6.90417 5.47917 6.7125 5.2875C6.52083 5.09583 6.28333 5 6 5C5.71667 5 5.47917 5.09583 5.2875 5.2875C5.09583 5.47917 5 5.71667 5 6V13ZM9 13C9 13.2833 9.09583 13.5208 9.2875 13.7125C9.47917 13.9042 9.71667 14 10 14C10.2833 14 10.5208 13.9042 10.7125 13.7125C10.9042 13.5208 11 13.2833 11 13V6C11 5.71667 10.9042 5.47917 10.7125 5.2875C10.5208 5.09583 10.2833 5 10 5C9.71667 5 9.47917 5.09583 9.2875 5.2875C9.09583 5.47917 9 5.71667 9 6V13Z"
                            fill="#2A3647" />
                    </svg>
                    <button type="button" class="delete-btn">Delete</button>
                </div>
                <div class="button-seperator"></div>
                <div class="edit-container">
                    <svg class="edit-svg" width="15" height="15" viewBox="0 0 19 19" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M2 17H3.4L12.025 8.375L10.625 6.975L2 15.6V17ZM16.3 6.925L12.05 2.725L13.45 1.325C13.8333 0.941667 14.3042 0.75 14.8625 0.75C15.4208 0.75 15.8917 0.941667 16.275 1.325L17.675 2.725C18.0583 3.10833 18.2583 3.57083 18.275 4.1125C18.2917 4.65417 18.1083 5.11667 17.725 5.5L16.3 6.925ZM14.85 8.4L4.25 19H0V14.75L10.6 4.15L14.85 8.4Z"
                            fill="#2A3647" />
                    </svg>
                    <button type="button" class="edit-btn">Edit</button>
                </div>
                <div class="edit-container">
                    <button type="button" class="save-btn" style="display: none;">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Creation Overlay -->
    <div id="taskOverlay" class="overlay-board-addTask">
        <div class="overlay-board-addTask-content">
            <div class="addTask">
                <div>
                    <h2>Add Task</h2>
                </div>

                <form id="addtaskForm" novalidate onsubmit="validateFormular(event)">
                    <div class="input-Section">
                        <div class="inputLeft">
                            <!-- Title -->
                            <div class="form-title">
                                <label for="title">Title <span class="required">*</span></label>
                                <input type="text" id="title" name="title" placeholder="Enter a title" required>
                                <p id="error-title" class="error-message"></p>
                            </div>

                            <!-- Description -->
                            <div class="form-description">
                                <label for="description">Description</label>
                                <textarea id="description" name="description" placeholder="Enter a Description"
                                    rows="4"></textarea>
                                <img class="custom-resize" src="./assets/img/resize.png" alt="resize">
                            </div>

                            <!-- Assigned to -->
                            <div class="form-assigned-to">
                                <label>Assigned to</label>
                                <div id="assigned-to">
                                    <div class="dropdown-trigger" onclick="toggleDropdown()">
                                        <span id="placeholderAssigned">Select contacts to assign</span>
                                        <img src="./assets/img/arrow_down.png" alt="arrow" class="custom-arrow"
                                            id="customArrowAssigned">
                                    </div>
                                    <div class="contact-list" id="contactListAssigned">
                                    </div>
                                </div>
                                <!-- Div für die Anzeige der ausgewählten Kontakte -->
                                <div id="selectedContacts">
                                    <div id="selectedContactsList"></div>
                                </div>
                            </div>
                        </div>

                        <div class="seperator"></div>

                        <div class="inputRight">
                            <!-- Due Date -->
                            <div class="form-date">
                                <label for="due-date">Due Date <span class="required">*</span></label>
                                <input type="date" id="due-date" name="due_date" required onchange="changeDateColor()">
                                <span class="calendar-icon"><img src="./assets/img/date.png" alt="date"></span>
                                <p id="error-date" class="error-message"></p>
                            </div>

                            <!-- Priority -->
                            <div class="form-priority">
                                <label for="priority">Priority</label>
                                <div id="priority">
                                    <label class="radio-container">
                                        <input type="radio" id="urgent" name="priority" value="urgent">
                                        <span class="radio-custom urgent-radio">Urgent <img
                                                src="./assets/img/urgent.png" alt=""></span>
                                    </label>
                                    <label class="radio-container">
                                        <input type="radio" id="medium" name="priority" value="medium">
                                        <span class="radio-custom medium-radio">Medium <img
                                                src="./assets/img/medium.png" alt=""></span>
                                    </label>
                                    <label class="radio-container">
                                        <input type="radio" id="low" name="priority" value="low">
                                        <span class="radio-custom low-radio">Low <img src="./assets/img/low.png"
                                                alt=""></span>
                                    </label>
                                </div>
                            </div>

                            <!-- Category -->
                            <div class="form-category">
                                <label for="category">Category <span class="required">*</span></label>
                                <select id="category" name="category" required>
                                    <option value="" disabled selected>Select task category</option>
                                    <option value="Technical Task">Technical Task</option>
                                    <option value="User Story">User Story</option>
                                </select>
                                <img id="customArrowCategory" class="custom-arrow-category"
                                    src="./assets/img/arrow_down.png" alt="arrow_standard">
                                <p id="error-category" class="error-message"></p>
                            </div>

                            <!-- Subtasks -->
                            <div class="form-subtask">
                                <div>
                                    <label for="subtask">Subtasks</label>
                                    <input type="text" id="subtask" name="subtask" placeholder="Add a new Subtask"
                                        onclick="subtaskStyling(this)">
                                </div>
                                <div id="symbolStyling" class="symbol-container">
                                    <img src="./assets/img/plus_task.png" alt="plus">
                                </div>
                            </div>
                            <ul id="addedSubtask">
                                <li id="subtaskItem1" ondblclick="editItemOne(this)"></li>
                                <div class="edit-position">
                                    <input type="text" name="itemOne" id="editItemOne">
                                    <div id="editItemIconOne" class="edit-item-icon">
                                        <img src="./assets/img/addtask_bin.png" alt="bin" onclick="deleteItemOne()">
                                        <span>|</span>
                                        <img src="./assets/img/check_task.png" alt="check" onclick="submitItemOne()">
                                    </div>
                                </div>
                                <li id="subtaskItem2" ondblclick="editItemTwo(this)"></li>
                                <div class="edit-position">
                                    <input type="text" name="itemTwo" id="editItemTwo">
                                    <div id="editItemIconTwo" class="edit-item-icon">
                                        <img src="./assets/img/addtask_bin.png" alt="bin" onclick="deleteItemTwo()">
                                        <span>|</span>
                                        <img src="./assets/img/check_task.png" alt="check" onclick="submitItemTwo()">
                                    </div>
                                </div>
                            </ul>
                        </div>
                    </div>
                    <!-- Buttons -->
                    <div class="button-and-text">
                        <div>
                            <p id="required-text"><span class="required">*</span>This field is required</p>
                        </div>
                        <div class="form-buttons">
                            <button type="reset" class="clear-btn" onclick="clearTask()">Clear <span>X</span></button>
                            <button type="submit" class="create-btn">Create Task<img src="./assets/img/check.png"
                                    alt=""></button>
                        </div>
                    </div>
                </form>

                <div id="submit-card" class="submit-card">
                    <p>Task added to Board</p>
                    <img src="./assets/img/BoardLogo.png" alt="">
                </div>
            </div>
        </div>
    </div>

    <!-- Board.js als Modul laden -->
    <script src="scripts/board.js" type="module"></script>
    <script src="scripts/profile-toggle.js" defer></script>
</body>

</html>